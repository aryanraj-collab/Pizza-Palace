<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Palace | The Royal Taste</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. VARIABLES --- */
        :root {
            --orange: #FF9F1C;
            --bg-body: #121212;
            --bg-card: #1E1E1E;
            --text-main: #ffffff;
            --text-muted: #b0b0b0;
            --nav-bg: rgba(20, 20, 20, 0.95);
            --font-head: 'Bebas Neue', sans-serif;
            --font-body: 'Poppins', sans-serif;
            --shadow: 0 10px 30px rgba(0,0,0,0.5);
            --section-bg-dark: #1a1a1a;
        }

        [data-theme="light"] {
            --bg-body: #f4f4f4;
            --bg-card: #ffffff;
            --text-main: #222222;
            --text-muted: #666666;
            --nav-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 5px 15px rgba(0,0,0,0.1);
            --section-bg-dark: #eaeaea;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-body); background-color: var(--bg-body); color: var(--text-main); overflow-x: hidden; transition: 0.3s; }
        h1, h2, h3, h4 { font-family: var(--font-head); letter-spacing: 1px; }
        
        /* --- 2. LIVE BACKGROUND --- */
        #live-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none; opacity: 1.0;
        }

        /* --- 3. NAVBAR --- */
        .navbar {
            position: fixed; top: 0; width: 100%; z-index: 1000; padding: 8px 5%;
            display: flex; justify-content: space-between; align-items: center;
            background: var(--nav-bg); backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--orange); box-shadow: var(--shadow);
            transition: 0.3s;
        }
        
        .logo-container { display: flex; align-items: center; gap: 15px; }
        .logo-video { 
            height: 100px; width: 100px; border-radius: 50%;
            object-fit: cover; border: 3px solid var(--orange); 
            box-shadow: 0 0 20px rgba(255, 159, 28, 0.6); transition: 0.3s;
        }
        .logo-video:hover { transform: scale(1.05); }
        .logo-text { font-family: 'Yellowtail', cursive; color: var(--orange); font-size: 2rem; font-weight: bold; }
        .logo-text span { color: var(--text-main); }
        
        .nav-actions { display: flex; align-items: center; gap: 15px; }
        .theme-btn {
            background: none; border: 2px solid var(--orange); color: var(--text-main);
            width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
            font-size: 1.2rem; display: flex; align-items: center; justify-content: center;
            transition: 0.3s; position: relative; overflow: hidden;
        }
        .theme-btn:hover { background: var(--orange); color: white; }
        .fa-sun { opacity: 0; transform: translateY(30px) rotate(90deg); position: absolute; transition: 0.4s; }
        .fa-moon { opacity: 1; transform: translateY(0) rotate(0deg); position: absolute; transition: 0.4s; }
        [data-theme="light"] .fa-sun { opacity: 1; transform: translateY(0) rotate(0deg); }
        [data-theme="light"] .fa-moon { opacity: 0; transform: translateY(-30px) rotate(-90deg); }

        .cart-btn { position: relative; cursor: pointer; font-size: 1.6rem; color: var(--text-main); transition: 0.3s; }
        .cart-count {
            position: absolute; top: -5px; right: -8px; background: var(--orange); color: black;
            font-size: 0.8rem; padding: 2px 6px; border-radius: 50%; font-weight: bold;
        }

        /* --- 4. HERO SECTION --- */
        .hero {
            position: relative; min-height: 85vh; 
            background: radial-gradient(circle, rgba(0,0,0,0.05) 0%, var(--bg-body) 90%);
            display: flex; flex-direction: column; align-items: center; padding-top: 160px;
            text-align: center;
        }
        .hero h1 { font-family: var(--font-head); font-size: 5rem; color: var(--text-main); line-height: 1; z-index: 2; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }
        .hero p { color: var(--orange); letter-spacing: 3px; margin-top: 10px; font-weight: bold; z-index: 2; }
        .hero-img-container { width: 50vw; max-width: 600px; margin-top: 20px; z-index: 5; animation: float 6s ease-in-out infinite; }
        .hero-pizza { width: 100%; height: auto; filter: drop-shadow(0 20px 50px rgba(0,0,0,0.6)); }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* --- 5. MENU SECTION --- */
        .menu-section {
            position: relative; background-color: var(--orange);
            margin-top: -150px; padding-top: 180px; padding-bottom: 80px; z-index: 1;
        }
        .jagged-top {
            position: absolute; top: 0; left: 0; width: 100%; height: 200px;
            background: var(--orange);
            clip-path: polygon(0% 60%, 5% 50%, 10% 65%, 15% 55%, 20% 70%, 25% 60%, 30% 75%, 35% 65%, 40% 80%, 45% 70%, 50% 85%, 55% 70%, 60% 80%, 65% 65%, 70% 75%, 75% 60%, 80% 70%, 85% 55%, 90% 65%, 95% 50%, 100% 60%, 100% 100%, 0% 100%);
            transform: translateY(-98%);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        .category-header {
            font-size: 3rem; color: white; margin: 60px 0 30px; text-align: center;
            text-transform: uppercase; text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
            border-bottom: 3px solid white; display: inline-block; padding-bottom: 5px;
        }
        .category-wrapper { text-align: center; }

        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; margin-bottom: 40px; }

        .card {
            background: var(--bg-card); border-radius: 15px; overflow: hidden;
            box-shadow: var(--shadow); transition: 0.3s; display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-10px); }
        .card-img { width: 100%; height: 180px; object-fit: cover; }
        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-img { 
            width: 100%; 
            height: 200px;       /* Increased height slightly for better visibility */
            object-fit: contain; /* This forces the WHOLE image to show without cutting */
            background: #111;    /* Optional: Matches card bg so empty space isn't white */
        }
        .card-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 10px; flex-grow: 1; }
        .card-select {
            width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 5px;
            background: var(--bg-body); color: var(--text-main); border: 1px solid var(--text-muted);
        }
        .card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
        .price { font-size: 1.2rem; font-weight: bold; color: var(--orange); }
        
        .btn-add { background: var(--text-main); color: var(--bg-card); padding: 8px 20px; border-radius: 20px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-cust { background: transparent; border: 1px solid var(--text-main); color: var(--text-main); padding: 7px 15px; border-radius: 20px; font-size: 0.8rem; margin-right: 5px; cursor: pointer; }

        /* --- 6. BLOG SECTION --- */
        .blog-section { padding: 80px 20px; background: var(--section-bg-dark); position: relative; z-index: 2; }
        .section-title { text-align: center; font-size: 3rem; color: var(--orange); margin-bottom: 40px; }
        .blog-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; max-width: 1200px; margin: 0 auto; }
        .blog-card { background: var(--bg-card); padding: 30px; border-radius: 15px; box-shadow: var(--shadow); }
        .blog-inner-image { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; margin-bottom: 20px; }
        .blog-tabs { display: flex; gap: 15px; margin-bottom: 20px; border-bottom: 1px solid var(--text-muted); padding-bottom: 10px; }
        .tab-btn { background: none; border: none; color: var(--text-muted); font-weight: bold; cursor: pointer; font-size: 1rem; padding: 5px 10px; }
        .tab-btn.active { color: var(--orange); border-bottom: 2px solid var(--orange); }
        .tab-content { display: none; animation: fadeIn 0.5s ease; }
        .tab-content.active { display: block; }
        .tab-content p { line-height: 1.8; color: var(--text-main); font-size: 1rem; }

        /* --- 6.5. OUR PALACE SECTION --- */
        .palace-section { padding: 80px 20px; background: var(--bg-body); position: relative; z-index: 2; text-align: center; }
        .palace-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto 30px; }
        .palace-img { width: 100%; height: 300px; object-fit: cover; border-radius: 15px; box-shadow: var(--shadow); transition: 0.3s; border: 2px solid var(--orange); }
        .palace-img:hover { transform: scale(1.02); }
        .palace-content { max-width: 1000px; margin: 0 auto; line-height: 1.8; font-size: 1.1rem; color: var(--text-main); }

        /* --- 7. REVIEWS --- */
        .reviews-section { padding: 80px 20px; background: var(--section-bg-dark); position: relative; z-index: 2; }
        .review-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto; }
        .review-card { background: var(--bg-card); padding: 25px; border-radius: 15px; box-shadow: var(--shadow); display: flex; flex-direction: column; }
        .stars { color: var(--orange); margin-bottom: 15px; }
        .review-text { font-style: italic; color: var(--text-muted); flex-grow: 1; margin-bottom: 20px; line-height: 1.5; }
        .reviewer-name { font-weight: bold; color: var(--text-main); text-align: right; }

        /* --- 8. FOOTER --- */
        footer { background: #111; color: white; padding: 60px 5% 20px; position: relative; z-index: 2; }
        .footer-content { display: flex; flex-direction: column; align-items: center; max-width: 1200px; margin: 0 auto; gap: 30px; }
        
        /* Map Container */
        .map-container { width: 100%; height: 250px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 2px solid var(--orange); }
        
        .footer-info { text-align: center; }
        .footer-info h4 { color: var(--orange); font-size: 2.5rem; margin-bottom: 10px; font-family: 'Yellowtail', cursive; }
        .footer-info p { font-size: 1.2rem; color: #ccc; margin-bottom: 5px; }
        
        /* Social Links */
        .social-links { margin-top: 20px; display: flex; gap: 25px; justify-content: center; }
        .social-btn { color: white; font-size: 1.8rem; transition: 0.3s; display: flex; align-items: center; justify-content: center; width: 50px; height: 50px; border-radius: 50%; background: rgba(255,255,255,0.1); }
        .social-btn:hover { background: var(--orange); color: black; transform: translateY(-5px); box-shadow: 0 5px 15px rgba(255, 159, 28, 0.4); }

        .admin-bar { margin-top: 30px; border-top: 1px solid #333; padding-top: 20px; display: flex; justify-content: space-between; font-size: 0.8rem; color: #666; width: 100%; }
        .btn-link { background: none; border: none; color: #888; cursor: pointer; transition: 0.3s; }
        .btn-link:hover { color: var(--orange); }

        /* --- 9. ADMIN SYSTEM (REAL) --- */
        .admin-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 4000; display: none; justify-content: center; align-items: center; }
        .admin-login-box { background: var(--bg-card); width: 90%; max-width: 400px; padding: 40px; border-radius: 15px; text-align: center; border: 2px solid var(--orange); }
        .admin-input { width: 100%; padding: 12px; margin: 20px 0; border-radius: 5px; background: var(--bg-body); border: 1px solid var(--text-muted); color: var(--text-main); font-size: 1rem; }
        
        .admin-dashboard { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-body); z-index: 4000; display: none; overflow-y: auto; padding: 20px; }
        .dash-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; border-bottom: 1px solid var(--orange); margin-bottom: 30px; }
        .dash-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: var(--bg-card); padding: 20px; border-radius: 10px; border-left: 5px solid var(--orange); }
        .stat-val { font-size: 2.5rem; font-weight: bold; color: var(--text-main); }
        .stat-label { color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        
        .menu-editor-table { width: 100%; border-collapse: collapse; color: var(--text-main); margin-top: 20px; }
        .menu-editor-table th, .menu-editor-table td { padding: 10px; border-bottom: 1px solid #333; text-align: left; }
        .menu-editor-table th { background: #222; color: var(--orange); }
        .edit-btn-small { background: var(--text-main); color: black; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        
        .admin-edit-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; display: none; justify-content: center; align-items: center; }
        .edit-form { background: var(--bg-card); padding: 30px; border-radius: 10px; width: 95%; max-width: 450px; border: 1px solid var(--orange); max-height: 90vh; overflow-y: auto; }
        .edit-label { display: block; color: var(--orange); margin-bottom: 5px; font-weight: bold; margin-top: 15px; }

        /* --- 10. MODAL & CART (POLISHED FIX) --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; display: none; justify-content: center; align-items: center; }
        .modal { background: var(--bg-card); width: 95%; max-width: 500px; max-height: 85vh; border-radius: 10px; display: flex; flex-direction: column; overflow: hidden; animation: popUp 0.3s ease; }
        .modal-header { padding: 15px; background: var(--orange); color: white; display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 20px; overflow-y: auto; color: var(--text-main); }
        
        .opt-label { font-weight: bold; display: block; margin-bottom: 10px; font-size: 1.1rem; color: var(--orange); }
        .size-select { 
            width: 100%; padding: 12px; margin-bottom: 25px; border-radius: 8px; 
            background: var(--bg-body); color: var(--text-main); border: 1px solid var(--text-muted); font-size: 1rem;
        }

        .topping-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; }
        
        /* Updated Interactive Card Style */
        .topping-item { 
            display: flex; flex-direction: column; justify-content: center; align-items: flex-start;
            padding: 12px; background: var(--bg-body); 
            border: 1px solid var(--text-muted); border-radius: 8px; 
            cursor: pointer; transition: 0.3s; position: relative; user-select: none;
        }
        .topping-item:hover { border-color: var(--orange); }
        .topping-item.selected { 
            background: rgba(255, 159, 28, 0.15); border-color: var(--orange); 
            box-shadow: 0 0 10px rgba(255, 159, 28, 0.2);
        }
        /* No input needed, styles handle it */
        .top-name { font-weight: bold; font-size: 0.95rem; }
        .top-price { font-size: 0.8rem; color: var(--text-muted); margin-top: 3px; }
        .topping-item.selected .top-price { color: var(--orange); }

        .modal-footer { padding: 15px; border-top: 1px solid var(--text-muted); display: flex; justify-content: space-between; align-items: center; background: var(--bg-body); }

        .cart-sidebar { position: fixed; top: 0; right: -100%; width: 100%; max-width: 350px; height: 100%; background: var(--bg-card); z-index: 3000; transition: 0.3s; display: flex; flex-direction: column; box-shadow: -5px 0 20px rgba(0,0,0,0.5); }
        .cart-sidebar.open { right: 0; }
        .cart-header { padding: 20px; background: var(--orange); color: white; display: flex; justify-content: space-between; }
        .cart-items { flex: 1; overflow-y: auto; padding: 20px; color: var(--text-main); }
        .cart-item { margin-bottom: 15px; border-bottom: 1px solid var(--text-muted); padding-bottom: 10px; }
        .cart-footer { padding: 20px; background: var(--bg-body); color: var(--text-main); }
        .btn-whatsapp { width: 100%; padding: 15px; background: #25D366; color: white; border: none; font-weight: bold; cursor: pointer; border-radius: 8px; }

        /* --- 11. FLOATING BUTTONS --- */
        .floating-btn-container { position: fixed; bottom: 30px; right: 30px; z-index: 2000; display: flex; flex-direction: column; gap: 15px; }
        .float-btn { width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 28px; box-shadow: 0 5px 15px rgba(0,0,0,0.4); text-decoration: none; transition: 0.3s; }
        .float-btn:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0,0,0,0.6); }
        .float-wa { background-color: #25D366; }
        .float-call { background-color: var(--orange); }

        @keyframes popUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
       @media (max-width: 768px) { 
            .hero h1 { font-size: 3.5rem; } 
            
            /* ADJUSTED: Reduced padding to bring menu up */
            .menu-section { 
                margin-top: -80px; 
                padding-top: 80px; /* Was 140px */
            } 
            
            /* ADJUSTED: Reduced margin above the category title */
            .category-header {
                font-size: 2.5rem;
                margin-top: 10px; /* Was 60px */
                margin-bottom: 20px;
            }

            .hero-img-container { width: 70vw; }
            .section-title { font-size: 2.5rem; }
            .footer-content { grid-template-columns: 1fr; }
            .palace-img { height: 200px; }
            .logo-video { height: 70px; width: 70px; } 
        }
    </style>
</head>
<body>

    <canvas id="live-bg"></canvas>

    <div class="admin-modal" id="admin-login-modal">
        <div class="admin-login-box">
            <h2 style="color:var(--orange); font-family:var(--font-head); margin-bottom:10px;">Admin Portal</h2>
            <input type="password" id="admin-pass" class="admin-input" placeholder="Password (palace@123)">
            <button onclick="checkAdminPassword()" class="btn-add" style="width:100%;">LOGIN</button>
            <p id="admin-error" style="color:red; display:none; margin-top:10px;">Incorrect Password</p>
            <button onclick="closeAdminLogin()" style="background:none; border:none; color:#777; margin-top:15px; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div class="admin-dashboard" id="admin-dashboard">
        <div class="container">
            <div class="dash-header">
                <h2 style="font-family:var(--font-head); font-size:2.5rem; color:var(--orange);">PALACE MENU MANAGER</h2>
                <button onclick="logoutAdmin()" class="btn-add" style="background:#ff4d4d;">LOGOUT</button>
            </div>
            
            <div class="dash-stats">
                <div class="stat-card"><div class="stat-val" id="total-items-stat">0</div><div class="stat-label">Total Menu Items</div></div>
                <div class="stat-card"><div class="stat-val" id="total-cats-stat">0</div><div class="stat-label">Categories</div></div>
                <div class="stat-card" style="border-left-color:#25D366; cursor:pointer;" onclick="resetMenuData()"><div class="stat-val" style="font-size:1.5rem; color:#25D366;">RESET</div><div class="stat-label">Restore Default Menu</div></div>
            </div>

            <div id="admin-menu-section">
                <h3>Edit Menu Prices & Names</h3>
                <input type="text" id="admin-search" class="admin-input" placeholder="Search item..." onkeyup="renderAdminMenu()" style="margin-bottom:10px;">
                <div style="max-height:500px; overflow-y:auto;">
                    <table class="menu-editor-table">
                        <thead><tr><th>Name</th><th>Category</th><th>Details</th><th>Action</th></tr></thead>
                        <tbody id="admin-menu-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="admin-edit-modal" id="edit-modal">
        <div class="edit-form">
            <h3 style="color:var(--orange); margin-bottom:15px;">Edit Item</h3>
            <input type="hidden" id="edit-id">
            <label class="edit-label">Item Name</label>
            <input type="text" id="edit-name" class="admin-input" style="margin:0;">
            <div id="edit-dynamic-inputs"></div>
            <div style="display:flex; justify-content:space-between; margin-top:20px;">
                <button onclick="saveItemChanges()" class="btn-add" style="background:var(--orange); color:black;">SAVE</button>
                <button onclick="closeEditModal()" class="btn-add" style="background:#444;">CANCEL</button>
            </div>
        </div>
    </div>

    <nav class="navbar">
        <div class="logo-container">
            <video class="logo-video" autoplay loop muted playsinline><source src="4.mp4" type="video/mp4"></video>
            <div class="logo-text">PIZZA <span>PALACE</span></div>
        </div>
        <div class="nav-actions">
            <button class="theme-btn" onclick="openAdminLogin()" title="Admin Login"><i class="fas fa-user-shield"></i></button>
            <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-sun"></i><i class="fas fa-moon"></i></button>
            <div class="cart-btn" onclick="toggleCart()"><i class="fas fa-shopping-bag"></i><span class="cart-count" id="cart-count">0</span></div>
        </div>
    </nav>

    <header class="hero">
        <p>CHOOSE HOW YOU WANT TO BUY</p>
        <h1>WELCOME TO PIZZA</h1>
        <div class="hero-img-container">
            <img class="hero-pizza" src="https://png.pngtree.com/png-clipart/20230412/original/pngtree-modern-kitchen-food-boxed-cheese-lunch-pizza-png-image_9048155.png" alt="Floating Pizza">
        </div>
    </header>

    <section class="menu-section">
        <div class="jagged-top"></div>
        <div class="container" id="main-menu-container"></div>
    </section>

    <section class="blog-section">
        <h2 class="section-title">OUR HERITAGE</h2>
        <div class="blog-grid">
            <div class="blog-card">
                <h3>HISTORY OF PIZZA</h3>
                <img src="https://images.unsplash.com/photo-1590947132387-155cc02f3212?w=800&q=80" alt="Italian Pizza" class="blog-inner-image">
                <div class="blog-tabs"><button class="tab-btn active" onclick="openTab(event, 'pizza-eng')">English</button><button class="tab-btn" onclick="openTab(event, 'pizza-hin')">हिंदी</button></div>
                <div id="pizza-eng" class="tab-content active">
                    <p>The story of pizza is a journey that begins in antiquity but finds its true soul in the bustling streets of Naples, Italy. While flatbreads with toppings have sustained civilizations for millennia—from the Persians to the Greeks—it was in the 18th century that the modern pizza was born. Initially regarded as a dish for the poor, sold by street vendors to bustling workers, it was simple, cheap, and filling. The turning point arrived in 1889 when the Royal Palace of Capodimonte commissioned the Neapolitan pizzaiolo Raffaele Esposito to create a dish for the visiting Queen Margherita. To honor her, he crafted a pizza featuring tomatoes, mozzarella, and basil, mirroring the red, white, and green of the Italian flag. The Queen loved it, and the 'Pizza Margherita' was born. Following World War II, returning soldiers who had developed a taste for this Italian delight brought it home, sparking a global explosion of flavor that has since conquered the world, evolving into countless regional styles while remaining true to its Neapolitan roots.</p>
                </div>
                <div id="pizza-hin" class="tab-content"><p>पिज़्ज़ा की कहानी एक ऐसी यात्रा है जो प्राचीन काल में शुरू होती है लेकिन अपनी असली आत्मा इटली के नेपल्स की हलचल भरी सड़कों पर पाती है। यद्यपि टॉपिंग वाली रोटियों ने सदियों से सभ्यताओं को पाला है - फारसियों से लेकर यूनानियों तक - यह 18वीं शताब्दी में था जब आधुनिक पिज़्ज़ा का जन्म हुआ था। शुरुआत में इसे गरीबों का भोजन माना जाता था, जिसे सड़क विक्रेताओं द्वारा हलचल भरे मजदूरों को बेचा जाता था, यह सरल, सस्ता और पेट भरने वाला था। निर्णायक मोड़ 1889 में आया जब कैपोडिमोंटे के रॉयल पैलेस ने नेपल्स के पिज़्ज़ा बनाने वाले राफेल एस्पोसिटो को आने वाली रानी मार्गेरिटा के लिए एक व्यंजन बनाने का काम सौंपा। उनका सम्मान करने के लिए, उन्होंने टमाटर, मोज़ेरेला और तुलसी वाला एक पिज़्ज़ा बनाया, जो इतालवी झंडे के लाल, सफेद और हरे रंगों को दर्शाता था। रानी को यह बहुत पसंद आया, और 'पिज़्ज़ा मार्गेरिटा' का जन्म हुआ। द्वितीय विश्व युद्ध के बाद, लौटने वाले सैनिकों ने, जिन्होंने इस इतालवी आनंद का स्वाद चख लिया था, इसे अपने घर लाया, जिससे स्वाद का एक वैश्विक विस्फोट हुआ जिसने तब से दुनिया को जीत लिया है।</p>
                </div>
            </div>
            <div class="blog-card">
                <h3>HISTORY OF CHEESE</h3>
                <img src="blog.jpg" alt="Cheese" class="blog-inner-image">
                <div class="blog-tabs"><button class="tab-btn active" onclick="openTab(event, 'cheese-eng')">English</button><button class="tab-btn" onclick="openTab(event, 'cheese-hin')">हिंदी</button></div>
                <div id="cheese-eng" class="tab-content active"><p>The history of cheese is a tale as old as civilization itself, predating recorded history. It is believed to have been discovered accidentally around 8000 BCE, likely by nomadic herdsmen in the Fertile Crescent. As they transported milk in containers made from the stomachs of ruminants, the naturally occurring rennet enzymes, combined with the heat of the journey, caused the milk to curdle, separating into curds and whey. This happy accident not only preserved the milk but created a nutrient-dense, travel-ready food source. By the time of the Roman Empire, cheesemaking had evolved into a sophisticated art form, with the Romans introducing aging processes and spreading techniques across Europe. Monasteries in the Middle Ages further refined these methods, giving rise to many of the classic varieties we cherish today. From soft bries to hard parmesans, cheese remains a testament to human ingenuity in preserving the simple gift of milk.</p>
                </div>
                <div id="cheese-hin" class="tab-content"><p>पनीर का इतिहास सभ्यता जितना ही पुराना है, जो लिखित इतिहास से भी पहले का है। ऐसा माना जाता है कि इसकी खोज लगभग 8000 ईसा पूर्व में गलती से हुई थी, संभवतः उपजाऊ क्रिसेंट में खानाबदोश चरवाहों द्वारा। जब वे जानवरों के पेट से बने बर्तनों में दूध ले जाते थे, तो स्वाभाविक रूप से होने वाले रेनेट एंजाइम, यात्रा की गर्मी के साथ मिलकर, दूध को फाड़ देते थे, जिससे वह दही और मट्ठे में अलग हो जाता था। इस सुखद दुर्घटना ने न केवल दूध को संरक्षित किया बल्कि एक पोषक तत्वों से भरपूर, यात्रा के लिए तैयार भोजन स्रोत भी बनाया। रोमन साम्राज्य के समय तक, पनीर बनाना एक परिष्कृत कला के रूप में विकसित हो गया था, जिसमें रोमनों ने उम्र बढ़ने की प्रक्रियाओं को शुरू किया और पूरे यूरोप में तकनीकों का प्रसार किया। मध्य युग में मठों ने इन तरीकों को और परिष्कृत किया, जिससे आज हम जिन क्लासिक किस्मों को पसंद करते हैं, उनमें से कई का जन्म हुआ। नरम ब्री से लेकर सख्त परमेसन तक, पनीर दूध के साधारण उपहार को संरक्षित करने में मानवीय सरलता का प्रमाण बना हुआ है।</p></div>
            </div>
        </div>
    </section>

    <section class="palace-section">
        <h2 class="section-title">OUR PALACE</h2>
        <div class="palace-grid">
            <img src="1.jpg" alt="Exterior" class="palace-img">
            <img src="2.jpg" alt="Interior 1" class="palace-img">
            <img src="3.jpg" alt="Interior 2" class="palace-img">
        </div>
        <p class="palace-content">Welcome to Pizza Palace, a sanctuary where culinary passion meets royal hospitality. We believe that dining is not just about eating; it is an immersive experience that engages all the senses. Our 'Palace' is designed to be your home away from home, featuring a warm, rustic ambiance that invites you to relax, unwind, and create lasting memories with loved ones. Every corner of our establishment reflects our commitment to excellence, from the carefully curated decor to the smiles of our attentive staff. We take immense pride in our kitchen, where we use only the freshest, locally sourced vegetables, authentic cheeses, and hand-tossed dough prepared daily. Whether you are here for a quick bite, a romantic dinner, or a joyous family celebration, we promise to treat you like royalty, serving you flavors that are nothing short of majestic</p>
    </section>

    <section class="reviews-section">
        <h2 class="section-title" style="color:var(--text-main)">CUSTOMER LOVE</h2>
        <div class="review-grid">
            <div class="review-card"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="review-text">"Hands down the best wood-fired pizza in Varanasi!"</p><p class="reviewer-name">- Rahul Sharma</p></div>
            <div class="review-card"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div><p class="review-text">"Great vibe and food."</p><p class="reviewer-name">- Priya Kapoor</p></div>
            <div class="review-card"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="review-text">"Ordered a combo for a family gathering."</p><p class="reviewer-name">- Amit Patel</p></div>
            <div class="review-card"><div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="review-text">"The Choco Lava cake is divine!"</p><p class="reviewer-name">- Vikram Singh</p></div>
        </div>
    </section>

    <div class="floating-btn-container">
        <a href="tel:+919793567386" class="float-btn float-call" title="Call Us"><i class="fas fa-phone-alt"></i></a>
        <a href="https://wa.me/919793567386" class="float-btn float-wa" target="_blank" title="WhatsApp Us"><i class="fab fa-whatsapp"></i></a>
    </div>

    <footer>
        <div class="footer-content">
            <div class="map-container"><iframe src="https://maps.google.com/maps?q=Pizza%20Palace%2C%20Chitaipur%2C%20Varanasi&t=&z=15&ie=UTF8&iwloc=&output=embed" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe></div>
            <div class="footer-info">
                <h4>Pizza Palace</h4>
                <p>Chitaipur, Savitri Market, Varanasi - 221106</p>
                <p style="margin-top:10px; font-weight:bold; color:var(--orange); font-size:1.3rem;">+91 9793567386</p>
                <div class="social-links">
                    <a href="https://www.facebook.com/share/1C4X2iP4ph/?mibextid=wwXIfr" target="_blank" class="social-btn"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/pizza_palace_the_royal_taste?igsh=ZHhmNGlubXRyMWx6&utm_source=qr" target="_blank" class="social-btn"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="admin-bar"><p>© 2026 Pizza Palace</p><button class="btn-link" onclick="openAdminLogin()">Admin Handle</button></div>
    </footer>

    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header"><h3>Customize</h3><button onclick="closeModal()" style="background:none; border:none; color:white; font-size:1.5rem;">×</button></div>
            <div class="modal-body">
                <label class="opt-label">Select Size</label>
                <select id="modal-size" class="size-select" onchange="renderToppings(); updateModalPrice();"></select>
                <div id="topping-section">
                    <label class="opt-label">Add Toppings</label>
                    <div class="topping-grid" id="modal-toppings"></div>
                </div>
            </div>
            <div class="modal-footer"><div style="font-size:1.4rem; font-weight:bold; color:var(--orange)">₹<span id="modal-price">0</span></div><button class="btn-add" onclick="addFromModal()">ADD TO CART</button></div>
        </div>
    </div>
    <div class="cart-sidebar" id="cart-sidebar"><div class="cart-header"><h3>Your Order</h3><button onclick="toggleCart()" style="background:none; border:none; color:white; font-size:1.5rem;">×</button></div><div class="cart-items" id="cart-list"></div><div class="cart-footer"><h3>Total: ₹<span id="cart-total">0</span></h3><button class="btn-whatsapp" onclick="checkout()">ORDER ON WHATSAPP</button></div></div>

    <script>
        // --- DATA LAYER ---
        const rawToppings = [
            {id:'onion', name:'Onion', prices:{reg:20, med:35, lrg:45}},
            {id:'capsicum', name:'Capsicum', prices:{reg:20, med:35, lrg:45}},
            {id:'tomato', name:'Tomato', prices:{reg:20, med:35, lrg:45}},
            {id:'corn', name:'Golden Corn', prices:{reg:20, med:35, lrg:45}},
            {id:'matar', name:'Matar (Pea)', prices:{reg:20, med:35, lrg:45}},
            {id:'jalapeno', name:'Jalapeno', prices:{reg:20, med:35, lrg:45}},
            {id:'mushroom', name:'Mushroom', prices:{reg:30, med:40, lrg:50}},
            {id:'paprika', name:'Red Paprika', prices:{reg:30, med:40, lrg:50}},
            {id:'olive', name:'Black Olive', prices:{reg:30, med:40, lrg:50}},
            {id:'babycorn', name:'Baby Corn', prices:{reg:30, med:45, lrg:50}},
            {id:'paneer', name:'Paneer', prices:{reg:30, med:45, lrg:60}},
            {id:'cheese', name:'Extra Cheese', prices:{reg:35, med:55, lrg:75}}
        ];

        const defaultMenu = [
            // PIZZA MINIA
            { id: 101, name: "Single Onion", cat: "Pizza Minia", price: 79, img: "onion.jpg" },
            { id: 102, name: "Tangy Tomato", cat: "Pizza Minia", price: 79, img: "tangy.jpg" },
            { id: 103, name: "Corn King", cat: "Pizza Minia", price: 99, img: "king.jpg" },
            { id: 104, name: "Candy Capsicum", cat: "Pizza Minia", price: 89, img: "candy.jpg" },
            { id: 105, name: "Paneer Pyaja", cat: "Pizza Minia", price: 99, img: "pyaza.jpg" },
            // AUTHENTIC PIZZA
            { id: 201, name: "Margherita", cat: "Authentic Pizza", prices: {reg:119, med:229, lrg:349}, img: "margh.jpg", desc:"Single Cheese + Tomato" },
            { id: 202, name: "Peppy Paneer", cat: "Authentic Pizza", prices: {reg:149, med:289, lrg:439}, img: "peppy.jpg", desc:"Paneer + Capsicum + Red Paprika" },
            { id: 203, name: "Veggie Lover", cat: "Authentic Pizza", prices: {reg:169, med:319, lrg:449}, img: "https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?w=500", desc:"Onion + Capsicum + Corn + Paneer" },
            { id: 204, name: "Extravaganza Loaded", cat: "Authentic Pizza", prices: {reg:169, med:319, lrg:449}, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=500", desc:"Black Olive + Capsicum + Onion + Mushroom + Corn + Jalapeno" },
            { id: 205, name: "Simply Veg", cat: "Authentic Pizza", prices: {reg:139, med:239, lrg:429}, img: "veg.jpg", desc:"Onion + Capsicum + Tomato" },
            { id: 206, name: "Corn Mania", cat: "Authentic Pizza", prices: {reg:149, med:289, lrg:439}, img: "cornmania.jpg", desc:"Golden Corn + Baby Corn" },
            // SAUCES SPECIAL
            { id: 301, name: "Makhani Pizza", cat: "Sauces Special Pizza", prices: {reg:149, med:289, lrg:439}, img: "makhani.jpg", desc:"Paneer + Capsicum + Golden Corn" },
            { id: 302, name: "Kadhai Paneer Pizza", cat: "Sauces Special Pizza", prices: {reg:149, med:289, lrg:439}, img: "kadhai.jpg", desc:"Paneer + Onion + Capsicum" },
            { id: 303, name: "Matar Paneer Pizza", cat: "Sauces Special Pizza", prices: {reg:149, med:289, lrg:439}, img: "image_8f814e66.png", desc:"Paneer + Onion + Matar" },
            { id: 304, name: "Achari Pizza", cat: "Sauces Special Pizza", prices: {reg:169, med:319, lrg:449}, img: "achari.jpg", desc:"Paneer + Onion + Capsicum + Mushroom + Jalapeno" },
            { id: 305, name: "Indian Tandoori Paneer", cat: "Sauces Special Pizza", prices: {reg:169, med:319, lrg:449}, img: "tandoori.jpg", desc:"Paneer + Onion + Capsicum + Jalapeno" },
            { id: 306, name: "Matar Mushroom Pizza", cat: "Sauces Special Pizza", prices: {reg:149, med:289, lrg:439}, img: "mattarmushroom.jpg", desc:"Matar + Mushroom + Onion" },
            { id: 307, name: "Chilly Paneer Pizza", cat: "Sauces Special Pizza", prices: {reg:169, med:319, lrg:449}, img: "chilly.jpg", desc:"Paneer + Onion + Red Paprika + Jalapeno" },
            { id: 308, name: "Pizza Palace Special", cat: "Sauces Special Pizza", prices: {reg:179, med:329, lrg:459}, img: "special.jpg", desc:"Golden Corn + Onion + Capsicum + Paneer + Special Sauce" },
            // SANDWICHES
            { id: 901, name: "Veggie Sandwich", cat: "Sandwiches", price: 70, img: "https://images.unsplash.com/photo-1528735602780-2552fd46c7af?w=500" },
            { id: 902, name: "Veggie Corn Sandwich", cat: "Sandwiches", price: 80, img: "cs.jpg" },
            { id: 903, name: "Cheese Sandwich", cat: "Sandwiches", price: 90, img: "cheesesand.jpg" },
            { id: 904, name: "Paneer Sandwich", cat: "Sandwiches", price: 90, img: "paneersand.jpg" },
            { id: 905, name: "Paneer Cheese Sandwich", cat: "Sandwiches", price: 100, img: "paneerchese.jpg" },
            // BURGERS
            { id: 401, name: "Tangy Tikki Burger", cat: "Burgers", price: 45, img: "tangytikka.jpg" },
            { id: 402, name: "Veggie Burger", cat: "Burgers", price: 69, img: "vegieburger.jpg" },
            { id: 403, name: "Paneer Burger", cat: "Burgers", price: 79, img: "paneerburger.jpg" },
            { id: 404, name: "Cheese Burger", cat: "Burgers", price: 79, img: "cheeseburger.jpg" },
            { id: 405, name: "Paneer Cheese Burger", cat: "Burgers", price: 89, img: "pcb.jpg" },
            { id: 406, name: "Palace King Burger", cat: "Burgers", price: 119, img: "kingburger.jpg" },
            // SIDES
            { id: 601, name: "Cheese Garlic Bread", cat: "Sides & Garlic Bread", price: 79, img: "garliccheese.jpg" },
            { id: 602, name: "Simply Veg Garlic Bread", cat: "Sides & Garlic Bread", price: 89, img: "vegbread.jpg" },
            { id: 603, name: "Paneer Garlic Bread", cat: "Sides & Garlic Bread", price: 109, img: "paneergarlic.jpg" },
            { id: 604, name: "Paneer Corn Garlic Bread", cat: "Sides & Garlic Bread", price: 119, img: "corngarlic.jpg" },
            { id: 605, name: "Loaded Garlic Bread", cat: "Sides & Garlic Bread", price: 129, img: "loaded.jpg" },
            
            // --- UPDATED FRIES (Now with Variants) ---
            { id: 606, name: "Masala French Fries", cat: "Sides & Garlic Bread", img: "masalafrench.jpg", variants: {"Regular":69, "Medium":119, "Large":159} },
            
            { id: 607, name: "Pizza Palace Parcel", cat: "Sides & Garlic Bread", price: 45, img: "parcel.jpg", desc: "Special Veg Parcel" },
            { id: 608, name: "Special Dip", cat: "Sides & Garlic Bread", price: 15, img: "dip.jpg", desc:"Reg:15 / Med:25 / Lrg:35" },
            // SWEETS
            { id: 701, name: "Choco Lava Cake", cat: "Special Sweet", img: "chocolava.jpg", variants: {"100gm":55, "250gm":110} },
            { id: 703, name: "Brownie with Ice-Cream", cat: "Special Sweet", price: 55, img: "brownie.jpg" },
            
            // --- UPDATED ICE CREAMS (Now with Variants) ---
            { id: 704, name: "Vanilla Ice-Cream", cat: "Special Sweet", img: "vanila.jpg", variants: {"100ml":40, "200ml":70} },
            { id: 705, name: "Butter Scotch Ice-Cream", cat: "Special Sweet", img: "butter.jpg", variants: {"100ml":40, "200ml":70} },
            
            // DRINKS
            { id: 501, name: "Hot Coffee", cat: "Shakes & Drinks", price: 25, img: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=500" },
            { id: 502, name: "Cold Coffee", cat: "Shakes & Drinks", price: 79, img: "cold.jpg" },
            { id: 503, name: "Strawberry Shake", cat: "Shakes & Drinks", price: 79, img: "https://images.unsplash.com/photo-1579954115545-a95591f28bfc?w=500" },
            { id: 504, name: "Mango Shake", cat: "Shakes & Drinks", price: 79, img: "https://images.unsplash.com/photo-1546173159-315724a31696?w=500" },
            { id: 505, name: "Oreo Shake", cat: "Shakes & Drinks", price: 89, img: "oreo.jpg" },
            { id: 506, name: "Kit-Kat Shake", cat: "Shakes & Drinks", price: 89, img: "kitkat.jpg" },
            // COMBOS
            { id: 801, name: "Meal for 1 (A)", cat: "Combos", price: 293, img: "mealA.jpg", desc:"Peppy Paneer(Reg) + Veggie Burger + Choco Lava Cake + Cold Drink" },
            { id: 802, name: "Meal for 1 (B)", cat: "Combos", price: 313, img: "mealB.jpg", desc:"Veggie Lover(Reg) + French Fries(Reg) + Choco Lava Cake + Cold Drink" },
            { id: 803, name: "Meal for 1 (C)", cat: "Combos", price: 333, img: "mealC.jpg", desc:"Palace Special(Reg) + Cheese Burger + Choco Lava Cake + Cold Drink" },
            { id: 804, name: "Meal for 2 (A)", cat: "Combos", price: 755, img: "meal2A.jpg", desc:"Palace Special(Med) + 2 Cheese Burger + 2 Lava Cake + 2 Cheese Garlic Bread" },
            { id: 805, name: "Meal for 2 (B)", cat: "Combos", price: 597, img: "meal2B.jpg", desc:"Matar Paneer(Med) + 2 Veggie Burger + 2 Lava Cake + 2 Cold Drink" }
        ];

        let menu = [];
        if(localStorage.getItem('pizzaPalaceMenu')) {
            menu = JSON.parse(localStorage.getItem('pizzaPalaceMenu'));
        } else {
            menu = defaultMenu;
        }

        let cart = [];
        let activeItem = null;

        // --- ADMIN SYSTEM ---
        function openAdminLogin() { document.getElementById('admin-login-modal').style.display = 'flex'; }
        function closeAdminLogin() { document.getElementById('admin-login-modal').style.display = 'none'; document.getElementById('admin-error').style.display='none'; }
        function checkAdminPassword() {
            if(document.getElementById('admin-pass').value === 'palace@123') {
                closeAdminLogin();
                document.getElementById('admin-dashboard').style.display = 'block';
                document.body.style.overflow = 'hidden';
                updateAdminStats();
                renderAdminMenu();
            } else {
                document.getElementById('admin-error').style.display = 'block';
            }
        }
        function logoutAdmin() {
            document.getElementById('admin-dashboard').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('admin-pass').value = '';
        }
        function updateAdminStats() {
            const categories = [...new Set(menu.map(i => i.cat))];
            document.getElementById('total-items-stat').innerText = menu.length;
            document.getElementById('total-cats-stat').innerText = categories.length;
        }
        function resetMenuData() {
            if(confirm("Are you sure? This will delete all your price changes.")) {
                localStorage.removeItem('pizzaPalaceMenu');
                menu = defaultMenu;
                renderAdminMenu();
                renderMenu();
                updateAdminStats();
            }
        }

        // --- REAL MENU EDITING (SMART) ---
        function renderAdminMenu() {
            const tbody = document.getElementById('admin-menu-body');
            const search = document.getElementById('admin-search').value.toLowerCase();
            tbody.innerHTML = '';
            menu.forEach(item => {
                if(item.name.toLowerCase().includes(search)) {
                    let priceDisplay = '';
                    if(item.prices) priceDisplay = `Reg: ₹${item.prices.reg}`;
                    else if(item.variants) priceDisplay = `Var: ${Object.keys(item.variants).length}`;
                    else priceDisplay = `₹${item.price}`;
                    
                    tbody.innerHTML += `<tr><td>${item.name}</td><td>${item.cat}</td><td>${priceDisplay}</td><td><button class="edit-btn-small" onclick="editMenuItem(${item.id})">Edit</button></td></tr>`;
                }
            });
        }

        function editMenuItem(id) {
            const item = menu.find(i => i.id === id);
            document.getElementById('edit-id').value = id;
            document.getElementById('edit-name').value = item.name;
            const container = document.getElementById('edit-dynamic-inputs');
            container.innerHTML = '';
            if(item.prices) {
                container.innerHTML += `<label class="edit-label">Regular Price</label><input type="number" id="edit-reg" class="admin-input" value="${item.prices.reg}">`;
                container.innerHTML += `<label class="edit-label">Medium Price</label><input type="number" id="edit-med" class="admin-input" value="${item.prices.med}">`;
                container.innerHTML += `<label class="edit-label">Large Price</label><input type="number" id="edit-lrg" class="admin-input" value="${item.prices.lrg}">`;
            } else if (item.variants) {
                for(let key in item.variants) {
                    container.innerHTML += `<label class="edit-label">${key} Price</label><input type="number" id="edit-var-${key}" class="admin-input" value="${item.variants[key]}">`;
                }
            } else {
                container.innerHTML += `<label class="edit-label">Price</label><input type="number" id="edit-price" class="admin-input" value="${item.price}">`;
            }
            document.getElementById('edit-modal').style.display = 'flex';
        }

        function saveItemChanges() {
            const id = parseInt(document.getElementById('edit-id').value);
            const newName = document.getElementById('edit-name').value;
            const idx = menu.findIndex(i => i.id === id);
            if(idx !== -1) {
                menu[idx].name = newName;
                if(menu[idx].prices) {
                    menu[idx].prices.reg = parseInt(document.getElementById('edit-reg').value);
                    menu[idx].prices.med = parseInt(document.getElementById('edit-med').value);
                    menu[idx].prices.lrg = parseInt(document.getElementById('edit-lrg').value);
                } else if (menu[idx].variants) {
                    for(let key in menu[idx].variants) {
                        menu[idx].variants[key] = parseInt(document.getElementById(`edit-var-${key}`).value);
                    }
                } else {
                    menu[idx].price = parseInt(document.getElementById('edit-price').value);
                }
                localStorage.setItem('pizzaPalaceMenu', JSON.stringify(menu));
                renderAdminMenu();
                renderMenu();
                closeEditModal();
                alert('Updated Successfully!');
            }
        }
        function closeEditModal() { document.getElementById('edit-modal').style.display = 'none'; }

        // --- FRONTEND RENDER ---
        function renderMenu() {
            const container = document.getElementById('main-menu-container');
            container.innerHTML = '';
            const categories = [...new Set(menu.map(item => item.cat))];
            categories.forEach(cat => {
                const header = document.createElement('div');
                header.className = 'category-wrapper';
                header.innerHTML = `<h2 class="category-header">${cat}</h2>`;
                container.appendChild(header);
                const grid = document.createElement('div');
                grid.className = 'menu-grid';
                const catItems = menu.filter(item => item.cat === cat);
                catItems.forEach(item => {
                    const el = document.createElement('div');
                    el.className = 'card';
                    let priceHtml = '', actionHtml = '', extraControls = '';
                    if(item.prices) {
                        priceHtml = `₹${item.prices.reg}`;
                        actionHtml = `<button class="btn-cust" onclick="openModal(${item.id})">MODIFY</button><button class="btn-add" onclick="openModal(${item.id})">ADD</button>`;
                    } else if (item.variants) {
                        const firstKey = Object.keys(item.variants)[0];
                        priceHtml = `₹<span id="price-${item.id}">${item.variants[firstKey]}</span>`;
                        actionHtml = `<button class="btn-add" onclick="addVariantItem(${item.id})">ADD</button>`;
                        let opts = ''; for(let v in item.variants) opts += `<option value="${v}">${v}</option>`;
                        extraControls = `<select class="card-select" id="select-${item.id}" onchange="updateCardPrice(${item.id})">${opts}</select>`;
                    } else {
                        priceHtml = `₹${item.price}`;
                        actionHtml = `<button class="btn-add" onclick="addSimple(${item.id})">ADD</button>`;
                    }
                    el.innerHTML = `<img src="${item.img}" class="card-img" loading="lazy"><div class="card-body"><h3 class="card-title">${item.name}</h3>${item.desc?`<p class="card-desc">${item.desc}</p>`:''}${extraControls}<div class="card-footer"><span class="price">${priceHtml}</span><div>${actionHtml}</div></div></div>`;
                    grid.appendChild(el);
                });
                container.appendChild(grid);
            });
        }

        // --- Standard Logic ---
        function updateCardPrice(id) { const item = menu.find(i => i.id === id); const variant = document.getElementById(`select-${id}`).value; document.getElementById(`price-${id}`).innerText = item.variants[variant]; }
        function addVariantItem(id) { const item = menu.find(i => i.id === id); const variant = document.getElementById(`select-${id}`).value; cart.push({name:`${item.name} (${variant})`, price: item.variants[variant], desc: ''}); updateCart(); toggleCart(); }
        
        // --- POLISHED MODAL FUNCTIONS ---
        function openModal(id) { 
            activeItem = menu.find(i => i.id === id); 
            document.getElementById('modal-overlay').style.display = 'flex'; 
            
            const sizeSelect = document.getElementById('modal-size');
            sizeSelect.innerHTML = '';
            if(activeItem.prices) {
                const map = {reg:'Regular', med:'Medium', lrg:'Large'};
                for(let key in activeItem.prices) {
                    sizeSelect.innerHTML += `<option value="${key}">${map[key]}</option>`;
                }
                sizeSelect.style.display = 'block';
            } else {
                sizeSelect.style.display = 'none';
            }

            renderToppings();
            updateModalPrice(); 
        }

        function renderToppings() {
            const container = document.getElementById('modal-toppings');
            container.innerHTML = '';
            
            // LOGIC FIX: Check category properly
            const isPizza = activeItem.cat.includes('Pizza') && activeItem.cat !== 'Pizza Minia';
            
            if(isPizza) {
                document.getElementById('topping-section').style.display = 'block';
                const size = document.getElementById('modal-size').value || 'reg';
                
                rawToppings.forEach(t => {
                    const price = t.prices[size];
                    // Using div instead of label to prevent double-toggling issues with inputs
                    const el = document.createElement('div');
                    el.className = 'topping-item';
                    el.dataset.id = t.id;
                    el.onclick = function() {
                        this.classList.toggle('selected');
                        updateModalPrice();
                    };
                    el.innerHTML = `
                        <span class="top-name">${t.name}</span>
                        <span class="top-price">+₹${price}</span>
                    `;
                    container.appendChild(el);
                });
            } else {
                document.getElementById('topping-section').style.display = 'none';
            }
        }

        function updateModalPrice() { 
            const size = document.getElementById('modal-size').value || 'reg';
            let total = activeItem.prices ? activeItem.prices[size] : activeItem.price;
            
            const selectedItems = document.querySelectorAll('.topping-item.selected');
            selectedItems.forEach(el => {
                const tId = el.dataset.id;
                const top = rawToppings.find(t => t.id === tId);
                if(top) total += top.prices[size];
            });
            document.getElementById('modal-price').innerText = total; 
        }

        function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }
        
        function addFromModal() { 
            const sizeVal = document.getElementById('modal-size').value || 'reg';
            const sizeMap = {reg:'Regular', med:'Medium', lrg:'Large'};
            let desc = activeItem.prices ? sizeMap[sizeVal] : '';
            
            let total = 0;
            if(activeItem.prices) total += activeItem.prices[sizeVal];
            else total += activeItem.price;

            let tops = [];
            const selectedItems = document.querySelectorAll('.topping-item.selected');
            selectedItems.forEach(el => {
                const tId = el.dataset.id;
                const top = rawToppings.find(t => t.id === tId);
                if(top) {
                    total += top.prices[sizeVal];
                    tops.push(top.name);
                }
            });
            
            if(tops.length > 0) desc += ` + ${tops.join(', ')}`;

            cart.push({name: activeItem.name, price: total, desc: desc});
            updateCart(); closeModal(); toggleCart(); 
        }

        function addSimple(id) { const item = menu.find(i => i.id === id); cart.push({name: item.name, price: item.price, desc: ''}); updateCart(); toggleCart(); }
        function updateCart() { const list = document.getElementById('cart-list'); list.innerHTML = ''; let total = 0; cart.forEach((item, idx) => { total += item.price; list.innerHTML += `<div class="cart-item"><div><b>${item.name}</b> ₹${item.price} <br><small>${item.desc}</small></div><button onclick="cart.splice(${idx},1); updateCart()" style="color:red; background:none; border:none; cursor:pointer">X</button></div>`; }); document.getElementById('cart-total').innerText = total; document.getElementById('cart-count').innerText = cart.length; }
        function toggleCart() { document.getElementById('cart-sidebar').classList.toggle('open'); }
        function checkout() { 
            let msg = "Hello Pizza Palace! Order:%0A"; 
            cart.forEach(i => msg += `- ${i.name} (₹${i.price}) ${i.desc}%0A`); 
            window.open(`https://wa.me/919793567386?text=${msg}`); 
        }
        function toggleTheme() { const b = document.body; b.setAttribute('data-theme', b.getAttribute('data-theme') === 'light' ? 'dark' : 'light'); }
        function openTab(evt, tabName) {
            const card = evt.target.closest('.blog-card');
            const tabContent = card.getElementsByClassName("tab-content");
            for(let i=0; i<tabContent.length; i++) { tabContent[i].style.display = "none"; tabContent[i].classList.remove('active'); }
            const tabLinks = card.getElementsByClassName("tab-btn");
            for(let i=0; i<tabLinks.length; i++) tabLinks[i].className = tabLinks[i].className.replace(" active", "");
            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.className += " active";
        }

        // BACKGROUND
        const canvas = document.getElementById('live-bg');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const imgUrls = ['https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Pizza-slice-fat.png/600px-Pizza-slice-fat.png','https://pngimg.com/uploads/basil/basil_PNG28.png','https://pngimg.com/uploads/tomato/tomato_PNG12594.png','https://pngimg.com/uploads/cheese/cheese_PNG25294.png','https://pngimg.com/uploads/olive/olive_PNG5.png','https://pngimg.com/uploads/chilli/chilli_PNG10.png','https://pngimg.com/uploads/oregano/oregano_PNG39.png'];
        const images = imgUrls.map(url => { const img = new Image(); img.src = url; return img; });
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();
        class Particle {
            constructor() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height; this.size = Math.random() * 40 + 20; this.speedY = Math.random() * 2 + 1; this.img = images[Math.floor(Math.random() * images.length)]; this.opacity = Math.random() * 0.4 + 0.6; }
            update() { this.y += this.speedY; if(this.y > canvas.height + 50) { this.y = -50; this.x = Math.random() * canvas.width; } }
            draw() { ctx.save(); ctx.globalAlpha = this.opacity; ctx.drawImage(this.img, this.x, this.y, this.size, this.size); ctx.restore(); }
        }
        function animateParticles() { ctx.clearRect(0,0,canvas.width, canvas.height); particles.forEach(p => { p.update(); p.draw(); }); requestAnimationFrame(animateParticles); }
        let imagesLoaded = 0; images.forEach(img => { img.onload = () => { imagesLoaded++; if(imagesLoaded === images.length) { particles = Array.from({length:30}, () => new Particle()); animateParticles(); } }; });

        renderMenu();
    </script>
</body>
</html>
